const { setOwnerConfig, getOwnerConfig, resolveOwnerNumber } = require('../lib/owner');

module.exports = {
  name: 'antibug',
  aliases: ['nobug', 'bugshield'],
  description: 'ğŸ›¡ï¸ Ê™ÊŸá´á´„á´‹ ÉªÉ´á´„á´á´ÉªÉ´É¢ Ê™á´œÉ¢ á´€á´›á´›á´€á´„á´‹s',
  ownerOnly: true,
  groupOnly: false,

  async execute(sock, msg, args, { sender, chatId, botPhoneNumber, groupMetadata }) {
    const ownerNumber = botPhoneNumber ? resolveOwnerNumber(botPhoneNumber, null) : resolveOwnerNumber(sender, groupMetadata);
    const ownerConfig = getOwnerConfig(ownerNumber);
    
    if (!args[0] || !['on', 'off', 'status'].includes(args[0].toLowerCase())) {
      return await sock.sendMessage(chatId, { 
        text: `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ ğŸ›¡ï¸ á´€É´á´›ÉªÊ™á´œÉ¢ - á´…á´€Ê€á´‹ sÊœÉªá´‡ÊŸá´… ğŸ›¡ï¸
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â›” ÉªÉ´á´ á´€ÊŸÉªá´… á´á´˜á´›Éªá´É´!

ğŸ“ á´œsá´€É¢á´‡:
â€¢ .á´€É´á´›ÉªÊ™á´œÉ¢ á´É´ - á´‡É´á´€Ê™ÊŸá´‡ á´˜Ê€á´á´›á´‡á´„á´›Éªá´É´
â€¢ .á´€É´á´›ÉªÊ™á´œÉ¢ á´Ò“Ò“ - á´…Éªsá´€Ê™ÊŸá´‡ á´˜Ê€á´á´›á´‡á´„á´›Éªá´É´
â€¢ .á´€É´á´›ÉªÊ™á´œÉ¢ sá´›á´€á´›á´œs - á´„Êœá´‡á´„á´‹ sá´›á´€á´›á´œs

ğŸ‘¿ Ê™ÊŸá´á´„á´‹s á´…á´ sá´˜á´€á´á´á´‡Ê€s á´€É´á´… Ê™á´œÉ¢ á´€á´›á´›á´€á´„á´‹s â˜ ï¸
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯` 
      });
    }

    const action = args[0].toLowerCase();
    
    if (action === 'status') {
      const status = ownerConfig.antibug ? 'âœ… á´‡É´á´€Ê™ÊŸá´‡á´…' : 'â›” á´…Éªsá´€Ê™ÊŸá´‡á´…';
      return await sock.sendMessage(chatId, { 
        text: `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ ğŸ›¡ï¸ á´€É´á´›ÉªÊ™á´œÉ¢ sá´›á´€á´›á´œs ğŸ›¡ï¸
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š sá´›á´€á´›á´œs: ${status}

ğŸ‘¿ "á´›Êœá´‡ sÊœÉªá´‡ÊŸá´… á´˜Ê€á´á´›á´‡á´„á´›s" â˜ ï¸
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯` 
      });
    }
    
    if (action === 'on') {
      setOwnerConfig(ownerNumber, { antibug: true });
      await sock.sendMessage(chatId, { 
        text: `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ ğŸ›¡ï¸ á´€É´á´›ÉªÊ™á´œÉ¢ á´‡É´á´€Ê™ÊŸá´‡á´… ğŸ›¡ï¸
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… á´…á´€Ê€á´‹ sÊœÉªá´‡ÊŸá´… á´€á´„á´›Éªá´ á´€á´›á´‡á´…!

âš¡ á´…á´ sá´˜á´€á´á´á´‡Ê€s á´¡ÉªÊŸÊŸ Ê™á´‡ Ê™ÊŸá´á´„á´‹á´‡á´…

ğŸ‘¿ "á´…á´‡á´á´É´Éªá´„ á´˜Ê€á´á´›á´‡á´„á´›Éªá´É´ á´€á´„á´›Éªá´ á´‡" â˜ ï¸
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯` 
      });
    } else {
      setOwnerConfig(ownerNumber, { antibug: false });
      await sock.sendMessage(chatId, { 
        text: `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ ğŸ›¡ï¸ á´€É´á´›ÉªÊ™á´œÉ¢ á´…Éªsá´€Ê™ÊŸá´‡á´… ğŸ›¡ï¸
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â›” á´…á´€Ê€á´‹ sÊœÉªá´‡ÊŸá´… á´…á´‡á´€á´„á´›Éªá´ á´€á´›á´‡á´…

âš ï¸ Êá´á´œ á´€Ê€á´‡ É´á´á´¡ á´ á´œÊŸÉ´á´‡Ê€á´€Ê™ÊŸá´‡

ğŸ‘¿ "á´˜Ê€á´á´›á´‡á´„á´›Éªá´É´ Ê€á´‡á´á´á´ á´‡á´…" â˜ ï¸
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯` 
      });
    }
  }
};
