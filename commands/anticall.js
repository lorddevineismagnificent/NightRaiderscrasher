const { setOwnerConfig, getOwnerConfig, resolveOwnerNumber } = require('../lib/owner');

module.exports = {
  name: 'anticall',
  aliases: ['nocall', 'callblock'],
  description: 'ğŸ“µ á´€á´œá´›á´-Ê€á´‡á´Šá´‡á´„á´› á´€ÊŸÊŸ á´„á´€ÊŸÊŸs',
  ownerOnly: true,
  groupOnly: false,

  async execute(sock, msg, args, { sender, chatId, botPhoneNumber, groupMetadata }) {
    const ownerNumber = botPhoneNumber ? resolveOwnerNumber(botPhoneNumber, null) : resolveOwnerNumber(sender, groupMetadata);
    const ownerConfig = getOwnerConfig(ownerNumber);
    
    if (!args[0] || !['on', 'off', 'status'].includes(args[0].toLowerCase())) {
      return await sock.sendMessage(chatId, { 
        text: `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ ğŸ“µ á´€É´á´›Éªá´„á´€ÊŸÊŸ - á´„á´€ÊŸÊŸ Ê™ÊŸá´á´„á´‹á´‡Ê€ ğŸ“µ
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â›” ÉªÉ´á´ á´€ÊŸÉªá´… á´á´˜á´›Éªá´É´!

ğŸ“ á´œsá´€É¢á´‡:
â€¢ .á´€É´á´›Éªá´„á´€ÊŸÊŸ á´É´ - á´‡É´á´€Ê™ÊŸá´‡ á´„á´€ÊŸÊŸ Ê™ÊŸá´á´„á´‹á´‡Ê€
â€¢ .á´€É´á´›Éªá´„á´€ÊŸÊŸ á´Ò“Ò“ - á´…Éªsá´€Ê™ÊŸá´‡ á´„á´€ÊŸÊŸ Ê™ÊŸá´á´„á´‹á´‡Ê€
â€¢ .á´€É´á´›Éªá´„á´€ÊŸÊŸ sá´›á´€á´›á´œs - á´„Êœá´‡á´„á´‹ sá´›á´€á´›á´œs

ğŸ‘¿ á´€á´œá´›á´-á´…á´‡á´„ÊŸÉªÉ´á´‡s á´€ÊŸÊŸ ÉªÉ´á´„á´á´ÉªÉ´É¢ á´„á´€ÊŸÊŸs â˜ ï¸
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯` 
      });
    }

    const action = args[0].toLowerCase();
    
    if (action === 'status') {
      const status = ownerConfig.anticall ? 'âœ… á´‡É´á´€Ê™ÊŸá´‡á´…' : 'â›” á´…Éªsá´€Ê™ÊŸá´‡á´…';
      return await sock.sendMessage(chatId, { 
        text: `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ ğŸ“µ á´€É´á´›Éªá´„á´€ÊŸÊŸ sá´›á´€á´›á´œs ğŸ“µ
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š sá´›á´€á´›á´œs: ${status}

ğŸ‘¿ "sÉªÊŸá´‡É´á´„á´‡ Éªs á´˜á´á´¡á´‡Ê€" â˜ ï¸
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯` 
      });
    }
    
    if (action === 'on') {
      setOwnerConfig(ownerNumber, { anticall: true });
      await sock.sendMessage(chatId, { 
        text: `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ ğŸ“µ á´€É´á´›Éªá´„á´€ÊŸÊŸ á´‡É´á´€Ê™ÊŸá´‡á´… ğŸ“µ
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… á´„á´€ÊŸÊŸ Ê™ÊŸá´á´„á´‹á´‡Ê€ á´€á´„á´›Éªá´ á´€á´›á´‡á´…!

âš¡ á´€ÊŸÊŸ á´„á´€ÊŸÊŸs á´¡ÉªÊŸÊŸ Ê™á´‡ á´€á´œá´›á´-á´…á´‡á´„ÊŸÉªÉ´á´‡á´…

ğŸ‘¿ "á´…á´ É´á´á´› á´…Éªsá´›á´œÊ€Ê™ á´›Êœá´‡ á´…á´‡á´á´É´s" â˜ ï¸
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯` 
      });
    } else {
      setOwnerConfig(ownerNumber, { anticall: false });
      await sock.sendMessage(chatId, { 
        text: `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ ğŸ“µ á´€É´á´›Éªá´„á´€ÊŸÊŸ á´…Éªsá´€Ê™ÊŸá´‡á´… ğŸ“µ
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â›” á´„á´€ÊŸÊŸ Ê™ÊŸá´á´„á´‹á´‡Ê€ á´…á´‡á´€á´„á´›Éªá´ á´€á´›á´‡á´…

ğŸ“± á´„á´€ÊŸÊŸs á´¡ÉªÊŸÊŸ É´á´á´¡ Ê€ÉªÉ´É¢ á´›ÊœÊ€á´á´œÉ¢Êœ

ğŸ‘¿ "sÉªÊŸá´‡É´á´„á´‡ Ê™Ê€á´á´‹á´‡É´" â˜ ï¸
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯` 
      });
    }
  }
};
